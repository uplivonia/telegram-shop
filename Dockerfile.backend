# Backend image
FROM node:20-alpine
WORKDIR /app
COPY backend ./backend
COPY package.json ./
RUN npm --prefix backend ci --only=production || npm --prefix backend install --omit=dev
ENV NODE_ENV=production
EXPOSE 4000
WORKDIR /app/backend
CMD ["node", "server.js"]
